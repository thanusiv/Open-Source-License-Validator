// both fromSnapshot and toSnapshot indicate the current tree