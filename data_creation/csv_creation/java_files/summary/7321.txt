      // assumes that writes will grow buffer deterministically