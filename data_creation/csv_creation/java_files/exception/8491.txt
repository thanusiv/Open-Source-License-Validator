@throws ServiceStateException if the service state is different from
   * the desired state